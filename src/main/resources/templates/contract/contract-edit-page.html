<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Contract Add Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
            crossorigin="anonymous"></script>
</head>
<body>
<div class="container">
    <br>
    <br>
    <form class="form-sample" method="post" th:action="@{/con/add-finish}" th:object="${contract}">
        <div class="mb-3">
            <label for="exampleInput1" class="form-label">Shartnoma nomini kiriting</label>
            <input type="text" class="form-control" id="exampleInput1" aria-describedby="Help" th:field="*{name}">
        </div>
        <div class="mb-3">
            <label for="exampleInput" class="form-label">Qarzdorlik</label>
            <input type="text" class="form-control" id="exampleInput" th:field="*{debt}">
        </div>
        <div class="dropdown">
            <button class="btn btn-success dropdown-toggle"
                    type="button"
                    id="multiSelectDropdown"
                    data-bs-toggle="dropdown"
                    aria-expanded="false">
                Select
            </button>
            <ul class="dropdown-menu"
                aria-labelledby="multiSelectDropdown">
                <li th:each="month : ${contract.getMonths()}">
                    <label>
                        <input type="checkbox" th:text="${month.getName()}" th:value="${month.getName()}">
                    </label>
                </li>
            </ul>
        </div>
        <br>
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
</div>
<script>
    const chBoxes =
        document.querySelectorAll('.dropdown-menu input[type="checkbox"]');
    const dpBtn =
        document.getElementById('multiSelectDropdown');
    let mySelectedListItems = [];

    function handleCB() {
        mySelectedListItems = [];
        let mySelectedListItemsText = '';

        chBoxes.forEach((checkbox) => {
            if (checkbox.checked) {
                mySelectedListItems.push(checkbox.value);
                mySelectedListItemsText += checkbox.value + ', ';
            }
        });

        dpBtn.innerText =
            mySelectedListItems.length > 0
                ? mySelectedListItemsText.slice(0, -2) : 'Select';
    }

    chBoxes.forEach((checkbox) => {
        checkbox.addEventListener('change', handleCB);
    });
</script>
</body>
</html>